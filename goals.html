<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VitalBMI - Fitness Goals</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="dashboard">
        <header class="dashboard-header">
            <div class="logo">
                <span class="brand">VitalBMI</span>
            </div>
            <nav class="menu">
                <ul class="menu-nav">
                    <li><a href="homepage.html" class="nav-item"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                    <li><a href="stats.html" class="nav-item"><i class="fas fa-chart-line"></i> Stats</a></li>
                    <li><a href="workouts.html" class="nav-item"><i class="fas fa-dumbbell"></i> Workouts</a></li>
                    <li><a href="nutrition.html" class="nav-item"><i class="fas fa-utensils"></i> Nutrition</a></li>
                    <li><a href="profile.html" class="nav-item"><i class="fas fa-user"></i> Profile</a></li>
                    <li><a href="about.html" class="nav-item"><i class="fas fa-info-circle"></i> About</a></li>
                    <li><a href="contact.html" class="nav-item"><i class="fas fa-envelope"></i> Contact</a></li>
                    <li><a href="terms.html" class="nav-item"><i class="fas fa-file-alt"></i> Terms</a></li>
                    <li><a href="index.html" class="nav-item"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                </ul>
            </nav>
            <div class="user-icon-top-right" onclick="window.location.href='profile.html'">
                <img src="assets/user.png" alt="User Icon" class="user-img">
            </div>
        </header>
        <main class="main-content">
            <h1 class="welcome-title">Fitness Goals</h1>
            <p class="welcome-subtitle">Manage and track your fitness objectives</p>
            <div class="goal-management">
                <h3>Add New Goal</h3>
                <div class="input-group">
                    <label><i class="fas fa-bullseye"></i> Goal Type</label>
                    <select id="new-goal-type">
                        <option value="weight-loss">Lose Weight</option>
                        <option value="muscle-gain">Gain Muscle</option>
                        <option value="endurance">Improve Endurance</option>
                    </select>
                </div>
                <div class="input-group">
                    <label><i class="fas fa-sort-numeric-up"></i> Target Value</label>
                    <input type="number" id="new-goal-target" placeholder="e.g., 5 kg" min="0" step="0.1" required>
                </div>
                <div class="input-group">
                    <label><i class="fas fa-calendar"></i> Deadline</label>
                    <input type="date" id="new-goal-deadline" required>
                </div>
                <button class="calc-btn" onclick="addGoal()">Add Goal</button>
                <h3>Your Goals</h3>
                <ul id="goal-list" class="workout-list"></ul>
            </div>
        </main>
    </div>
    <script>
        // Handle active nav item
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                this.classList.add('active');
                const href = this.getAttribute('href');
                if (href !== '#') {
                    window.location.href = href;
                }
            });
        });

        // Goals Management
        let goals = JSON.parse(localStorage.getItem('fitnessGoals')) || [];

        window.onload = function() {
            loadGoals();
        };

        function addGoal() {
            const type = document.getElementById('new-goal-type').value;
            const target = parseFloat(document.getElementById('new-goal-target').value);
            const deadline = document.getElementById('new-goal-deadline').value;
            if (type && !isNaN(target) && deadline) {
                goals.push({ type, target, deadline, progress: 0 });
                localStorage.setItem('fitnessGoals', JSON.stringify(goals));
                document.getElementById('new-goal-target').value = '';
                document.getElementById('new-goal-deadline').value = '';
                loadGoals();
            } else {
                alert('Please fill all fields with valid values!');
            }
        }

        function loadGoals() {
            const list = document.getElementById('goal-list');
            list.innerHTML = '';
            goals.forEach((goal, index) => {
                const currentDate = new Date();
                const deadlineDate = new Date(goal.deadline);
                let progress = 0;
                if (deadlineDate > currentDate && goal.target > 0) {
                    const timeElapsed = (currentDate - new Date()) / (deadlineDate - currentDate);
                    progress = Math.min(100, Math.max(0, (timeElapsed * 100))); // Ensure progress between 0-100
                }
                goal.progress = progress;
                li.innerHTML = `${goal.type} - Target: ${goal.target} by ${goal.deadline} (${progress.toFixed(1)}% complete) <button class="calc-btn delete-btn" onclick="deleteGoal(${index})">Delete</button>`;
                list.appendChild(li);
            });
        }

        function deleteGoal(index) {
            if (confirm('Are you sure you want to delete this goal?')) {
                goals.splice(index, 1);
                localStorage.setItem('fitnessGoals', JSON.stringify(goals));
                loadGoals();
            }
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'92e1a84ef8b37bdc',t:'MTc0NDI4MTk1NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>